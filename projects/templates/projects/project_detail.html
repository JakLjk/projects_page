{% extends "base.html" %}
{% load static %}
{% load markdownify %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'projects/css/markdown.css' %}">
{% endblock extra_css %}

{% block title %}{{ project.title }} · Jakub's Projects{% endblock title %}

{% block page_content %}
<article class="row g-4 align-items-stretch">

  <div class="col-lg-7 d-flex">
    <div class="w-100">
      {% if project.project_image %}
        <img src="{{ project.project_image.url }}" alt="{{ project.title }}" class="img-fluid rounded border">
      {% endif %}
    </div>
  </div>

<div class="col-lg-5 d-flex">
  <div class="d-flex flex-column w-100">
    <h1 class="h3 mb-3">{{ project.title }}</h1>

    {% if project.description %}
      <p class="mb-3">{{ project.description }}</p>
    {% endif %}

    <div class="mt-lg-auto">
      <hr class="my-2 border-top border-2 border-dark opacity-100">

  <div class="vstack gap-2 mb-3">
    {% if project.powerbi_iframe_url %}
      <a class="btn btn-primary" href="{% url 'project_pbi' project.pk %}" target="_blank" rel="noopener">PowerBI demo</a>
    {% endif %}

    {% if project.live_demo_link %}
      <a class="btn btn-primary" href="{{ project.live_demo_link }}" target="_blank" rel="noopener">Live demo</a>
    {% endif %}

    {% if project.source_link %}
      <a class="btn btn-outline-dark" href="{{ project.source_link }}" target="_blank" rel="noopener">Source</a>
    {% endif %}

    {% if project.documentation_file %}
      <a class="btn btn-outline-secondary" href="{% url 'project_doc' project.pk %}" target="_blank" rel="noopener">
        Documentation (PDF)
      </a>
      <a class="small text-secondary" href="{% url 'project_doc' project.pk %}?download=1">
        Download PDF
      </a>
    {% elif project.documentation_link %}
      <a class="btn btn-outline-secondary" href="{{ project.documentation_link }}" target="_blank" rel="noopener">
        Documentation
      </a>
    {% endif %}
  </div>

      <div class="pt-2 small text-secondary">
        <span>Created: {{ project.created|date:"Y-m-d" }}</span>
        <span class="mx-2">•</span>
        <span>Updated: {{ project.updated|date:"Y-m-d" }}</span>
      </div>
    </div>
  </div>
</div>
</article>

{% if project.instructions %}
  <hr class="my-4">
  <section>
    <h2 class="h5 mb-3">Installation & Usage</h2>
    <div class="markdown-body">
      {{ project.instructions|markdownify }}
    </div>
  </section>
{% endif %}
{% endblock page_content %}
